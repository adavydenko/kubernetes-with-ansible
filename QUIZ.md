# Контрольные вопросы и тесты по Kubernetes

## Тест 1: Основы Kubernetes

### Вопрос 1.1
**Что такое Pod в Kubernetes?**
- [ ] A) Виртуальная машина
- [ ] B) Минимальная единица развертывания, содержащая один или несколько контейнеров
- [ ] C) Сетевой интерфейс
- [ ] D) Файловая система

**Правильный ответ:** B

**Объяснение:** Pod - это наименьшая единица в Kubernetes, которая может содержать один или несколько контейнеров, совместно использующих сеть и файловую систему.

---

### Вопрос 1.2
**Какой компонент Kubernetes отвечает за планирование подов на узлы?**
- [ ] A) kubelet
- [ ] B) kube-scheduler
- [ ] C) kube-proxy
- [ ] D) etcd

**Правильный ответ:** B

**Объяснение:** kube-scheduler анализирует незапланированные поды и выбирает оптимальный узел для их размещения на основе различных критериев.

---

### Вопрос 1.3
**Что такое Deployment в Kubernetes?**
- [ ] A) Сетевой сервис
- [ ] B) Объект для управления жизненным циклом подов с возможностью обновления и отката
- [ ] C) Конфигурационный файл
- [ ] D) Том хранения

**Правильный ответ:** B

**Объяснение:** Deployment обеспечивает декларативное обновление подов и ReplicaSet'ов, позволяя развертывать приложения без простоя.

---

## Тест 2: Сети и сервисы

### Вопрос 2.1
**Какой тип Service доступен только внутри кластера?**
- [ ] A) NodePort
- [ ] B) LoadBalancer
- [ ] C) ClusterIP
- [ ] D) ExternalName

**Правильный ответ:** C

**Объяснение:** ClusterIP создает виртуальный IP-адрес, доступный только внутри кластера. Это тип по умолчанию для Service.

---

### Вопрос 2.2
**Зачем нужен MetalLB в bare metal кластерах?**
- [ ] A) Для мониторинга
- [ ] B) Для автоматического назначения внешних IP сервисам типа LoadBalancer
- [ ] C) Для резервного копирования
- [ ] D) Для управления пользователями

**Правильный ответ:** B

**Объяснение:** В облачных средах облачные провайдеры автоматически создают внешние IP для LoadBalancer сервисов. MetalLB решает эту задачу для bare metal кластеров.

---

### Вопрос 2.3
**Что такое CNI в контексте Kubernetes?**
- [ ] A) Container Network Interface - стандарт для сетевых плагинов
- [ ] B) Central Network Infrastructure
- [ ] C) Container Node Interface
- [ ] D) Cluster Network Integration

**Правильный ответ:** A

**Объяснение:** CNI (Container Network Interface) - это спецификация и библиотеки для настройки сетевых интерфейсов в контейнерах.

---

## Тест 3: Хранилище

### Вопрос 3.1
**Что такое PersistentVolume (PV)?**
- [ ] A) Временное хранилище для пода
- [ ] B) Абстракция физического хранилища в кластере
- [ ] C) Сетевой диск
- [ ] D) Кэш-память

**Правильный ответ:** B

**Объяснение:** PersistentVolume - это абстракция физического хранилища, которая позволяет подам использовать постоянное хранилище независимо от того, на каком узле они запущены.

---

### Вопрос 3.2
**В чем разница между PV и PVC?**
- [ ] A) Нет разницы, это одно и то же
- [ ] B) PV - это запрос на хранилище, PVC - это само хранилище
- [ ] C) PV - это само хранилище, PVC - это запрос на хранилище
- [ ] D) PV - это для чтения, PVC - для записи

**Правильный ответ:** C

**Объяснение:** PersistentVolume (PV) - это сам ресурс хранилища, а PersistentVolumeClaim (PVC) - это запрос на использование этого хранилища.

---

### Вопрос 3.3
**Какие ограничения имеет Local Storage Provisioner?**
- [ ] A) Нет ограничений
- [ ] B) Привязка к конкретному узлу, отсутствие репликации
- [ ] C) Только для чтения
- [ ] D) Требует внешний NFS

**Правильный ответ:** B

**Объяснение:** Local Storage привязывает данные к конкретному узлу, что означает, что при отказе узла данные становятся недоступными, и нет автоматической репликации.

---

## Тест 4: Мониторинг

### Вопрос 4.1
**Что собирает Prometheus?**
- [ ] A) Только логи приложений
- [ ] B) Только метрики узлов
- [ ] C) Метрики времени выполнения (time-series data)
- [ ] D) Только события Kubernetes

**Правильный ответ:** C

**Объяснение:** Prometheus - это система мониторинга и алертинга, которая собирает и хранит метрики времени выполнения из различных источников.

---

### Вопрос 4.2
**Какую роль играет Grafana в стеке мониторинга?**
- [ ] A) Сбор метрик
- [ ] B) Визуализация и создание дашбордов
- [ ] C) Отправка алертов
- [ ] D) Хранение логов

**Правильный ответ:** B

**Объяснение:** Grafana - это инструмент для визуализации и создания интерактивных дашбордов на основе данных из различных источников, включая Prometheus.

---

### Вопрос 4.3
**Что такое Node Exporter?**
- [ ] A) Экспортер для выгрузки данных из кластера
- [ ] B) Prometheus экспортер для метрик узлов
- [ ] C) Инструмент для резервного копирования
- [ ] D) Сетевой анализатор

**Правильный ответ:** B

**Объяснение:** Node Exporter - это Prometheus экспортер, который собирает метрики с узлов Linux, такие как CPU, память, диск, сеть.

---

## Тест 5: Автоматизация и масштабирование

### Вопрос 5.1
**Что такое HPA в Kubernetes?**
- [ ] A) High Performance Application
- [ ] B) Horizontal Pod Autoscaler - автоматическое горизонтальное масштабирование подов
- [ ] C) High Priority Access
- [ ] D) Host Port Assignment

**Правильный ответ:** B

**Объяснение:** Horizontal Pod Autoscaler (HPA) автоматически масштабирует количество реплик подов на основе метрик, таких как CPU или память.

---

### Вопрос 5.2
**В чем разница между Deployment и StatefulSet?**
- [ ] A) Нет разницы
- [ ] B) StatefulSet обеспечивает стабильную идентичность и упорядоченное развертывание
- [ ] C) Deployment быстрее
- [ ] D) StatefulSet дешевле

**Правильный ответ:** B

**Объяснение:** StatefulSet обеспечивает стабильную идентичность подов (имена, сетевые идентификаторы, хранилище) и упорядоченное развертывание, что важно для stateful приложений.

---

### Вопрос 5.3
**Что такое Job в Kubernetes?**
- [ ] A) Долгоживущее приложение
- [ ] B) Кратковременная задача, которая завершается после выполнения
- [ ] C) Сетевой сервис
- [ ] D) Конфигурационный файл

**Правильный ответ:** B

**Объяснение:** Job создает один или несколько подов и гарантирует, что указанное количество из них успешно завершится.

---

## Тест 6: Безопасность

### Вопрос 6.1
**Что такое RBAC в Kubernetes?**
- [ ] A) Role-Based Access Control - контроль доступа на основе ролей
- [ ] B) Resource-Based Access Control
- [ ] C) Rule-Based Access Control
- [ ] D) Role-Based Application Control

**Правильный ответ:** A

**Объяснение:** RBAC (Role-Based Access Control) - это механизм контроля доступа, который определяет, какие действия могут выполнять пользователи или сервисы в кластере.

---

### Вопрос 6.2
**Что такое NetworkPolicy?**
- [ ] A) Политика безопасности для подов
- [ ] B) Правила, определяющие, какой трафик разрешен между подами
- [ ] C) Политика резервного копирования
- [ ] D) Правила именования ресурсов

**Правильный ответ:** B

**Объяснение:** NetworkPolicy определяет правила для входящего и исходящего трафика между подами, позволяя изолировать сетевой трафик.

---

### Вопрос 6.3
**Что такое ServiceAccount?**
- [ ] A) Учетная запись пользователя
- [ ] B] Учетная запись для подов, определяющая их права доступа
- [ ] C) Учетная запись администратора
- [ ] D) Учетная запись для внешних сервисов

**Правильный ответ:** B

**Объяснение:** ServiceAccount - это учетная запись, которая определяет, какие права доступа имеет под к API Kubernetes.

---

## Тест 7: Ansible и автоматизация

### Вопрос 7.1
**Что такое Ansible роль?**
- [ ] A) Пользователь в системе
- [ ] B] Набор задач, переменных и файлов для автоматизации определенной функции
- [ ] C) Тип сервера
- [ ] D) Сетевой протокол

**Правильный ответ:** B

**Объяснение:** Ansible роль - это способ организации задач, переменных, файлов и других ресурсов для повторного использования и модульности.

---

### Вопрос 7.2
**Что означает идемпотентность в Ansible?**
- [ ] A) Выполнение задачи только один раз
- [ ] B] Возможность безопасно запускать playbook многократно без побочных эффектов
- [ ] C] Быстрое выполнение
- [ ] D] Параллельное выполнение

**Правильный ответ:** B

**Объяснение:** Идемпотентность означает, что повторное выполнение задачи не изменяет состояние системы, если оно уже соответствует желаемому.

---

### Вопрос 7.3
**Какой файл определяет инвентарь в Ansible?**
- [ ] A) ansible.cfg
- [ ] B] inventory.yml
- [ ] C] playbook.yml
- [ ] D] hosts.txt

**Правильный ответ:** B

**Объяснение:** inventory.yml (или inventory.ini) определяет список хостов и их группировку для выполнения Ansible задач.

---

## Практические задачи

### Задача 1: Создание простого приложения
Создайте namespace `test-app` и разверните в нем nginx с 2 репликами. Создайте сервис типа LoadBalancer.

**Решение:**
```bash
kubectl create namespace test-app
kubectl create deployment nginx --image=nginx:alpine --replicas=2 -n test-app
kubectl expose deployment nginx --port=80 --type=LoadBalancer -n test-app
```

### Задача 2: Настройка мониторинга
Создайте ConfigMap с правилами алертов для высокого использования CPU.

**Решение:**
```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: cpu-alerts
  namespace: monitoring
data:
  alert_rules.yml: |
    groups:
    - name: cpu-alerts
      rules:
      - alert: HighCPUUsage
        expr: 100 - (avg by(instance) (irate(node_cpu_seconds_total{mode="idle"}[5m])) * 100) > 80
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: "High CPU usage on {{ $labels.instance }}"
```

### Задача 3: Настройка хранилища
Создайте PVC на 2Gi с использованием Local Storage и подключите его к поду.

**Решение:**
```yaml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: data-pvc
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: local-storage
  resources:
    requests:
      storage: 2Gi
---
apiVersion: v1
kind: Pod
metadata:
  name: storage-pod
spec:
  containers:
  - name: app
    image: busybox
    command: ['sh', '-c', 'echo "Data stored at $(date)" > /data/test.txt; sleep 3600']
    volumeMounts:
    - name: data-volume
      mountPath: /data
  volumes:
  - name: data-volume
    persistentVolumeClaim:
      claimName: data-pvc
```

---

## Ключи к тестам

### Тест 1: Основы Kubernetes
1.1 - B, 1.2 - B, 1.3 - B

### Тест 2: Сети и сервисы
2.1 - C, 2.2 - B, 2.3 - A

### Тест 3: Хранилище
3.1 - B, 3.2 - C, 3.3 - B

### Тест 4: Мониторинг
4.1 - C, 4.2 - B, 4.3 - B

### Тест 5: Автоматизация и масштабирование
5.1 - B, 5.2 - B, 5.3 - B

### Тест 6: Безопасность
6.1 - A, 6.2 - B, 6.3 - B

### Тест 7: Ansible и автоматизация
7.1 - B, 7.2 - B, 7.3 - B

---

## Оценка результатов

### Отлично (90-100% правильных ответов)
Вы отлично знаете основы Kubernetes и готовы к продвинутым темам!

### Хорошо (70-89% правильных ответов)
У вас хорошее понимание концепций, но есть области для улучшения.

### Удовлетворительно (50-69% правильных ответов)
Вам нужно больше практики и изучения теории.

### Требует улучшения (менее 50% правильных ответов)
Рекомендуется повторить материал и больше практиковаться.

---

## Рекомендации для дальнейшего изучения

1. **Практика:** Выполните все упражнения из `EXERCISES.md`
2. **Теория:** Изучите официальную документацию Kubernetes
3. **Сертификация:** Рассмотрите подготовку к CKA/CKAD
4. **Сообщество:** Присоединитесь к Kubernetes сообществу

Удачи в изучении! 🚀
